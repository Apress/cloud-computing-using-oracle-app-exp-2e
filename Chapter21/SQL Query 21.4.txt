SELECT "TD"."LINE_NO","TM"."VCHDATE", "VCH"."VCHTYPE", "TM"."VCHNO", "TD"."VCHDESCRIPTION", nvl("TD"."VCHREFERENCE",'-') "VCHREFERENCE", "TD"."VCHDR", "TD"."VCHCR", "TD"."RECONCILED" 
FROM  "GL_VOUCHER" "VCH", "GL_TRAN_MASTER" "TM", "GL_TRAN_DETAIL" "TD" 
WHERE "TM"."COCODE"="TD"."COCODE" AND "TM"."TRAN_NO"="TD"."TRAN_NO" AND 
      "TM"."VCHCODE"="VCH"."VCHCODE" AND  "TM"."CLOSING"=0 AND 
      "TM"."VCHDESCRIPTION" <> 'OPENING BALANCES' AND 
      "TM"."COCODE"=(select cocode from gl_users where upper(userid)=upper(:APP_USER)) AND 
      "TD"."COACODE"=:P51_BANKS AND "TD"."RECONCILED"=:P51_CRITERIA
